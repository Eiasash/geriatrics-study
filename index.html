<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#1e3a5f">
    <meta name="description" content="SZMC Geriatrics - Clinical tools, presentation maker, and study resources for geriatric medicine">
    <title>SZMC Geriatrics Hub</title>
    <link rel="icon" type="image/svg+xml" href="szmc-presentation-maker/icons/icon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e3a5f;
            --primary-light: #2d5a8a;
            --primary-dark: #0f1f33;
            --secondary: #3498db;
            --accent: #27ae60;
            --accent-warning: #f39c12;
            --accent-danger: #e74c3c;
            --white: #ffffff;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* Removes blue highlight on tap */
        }

        body {
            font-family: var(--font-sans);
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
            /* FIX: Keeps background locked during scroll */
            background-attachment: fixed; 
            min-height: 100vh;
            color: var(--gray-800);
            /* FIX: Prevents horizontal scrolling issues */
            overflow-x: hidden;
            overflow-y: auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            padding: 40px 20px;
            text-align: center;
            color: var(--white);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .logo i {
            font-size: 3rem;
            color: var(--accent);
        }

        .logo-text {
            font-size: 2.5rem;
            font-weight: 700;
        }

        header p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Content */
        main {
            padding: 10px; /* Reduced padding for mobile */
            padding-bottom: 60px;
        }

        .section-title {
            color: var(--white);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-left: 10px;
        }

        .section-title i {
            color: var(--secondary);
        }

        /* Tool Cards Grid */
        .tools-grid {
            display: grid;
            /* FIX: Changed 320px to 280px to fit small phones */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .tool-card {
            background: var(--white);
            border-radius: 16px;
            padding: 32px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        .tool-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .tool-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: 20px;
        }

        .tool-icon.presentation { background: linear-gradient(135deg, #3498db, #2980b9); color: white; }
        .tool-icon.clinical { background: linear-gradient(135deg, #27ae60, #1e8449); color: white; }
        .tool-icon.study { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; }
        .tool-icon.h5p { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .tool-icon.hazzards { background: linear-gradient(135deg, #f39c12, #d68910); color: white; }

        .tool-card h3 {
            font-size: 1.35rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .tool-card p {
            color: var(--gray-600);
            line-height: 1.6;
            margin-bottom: 20px;
            flex: 1;
        }

        .tool-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .feature-tag {
            background: var(--gray-100);
            color: var(--gray-700);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .tool-card .arrow {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--secondary);
            font-weight: 600;
            margin-top: 20px;
        }

        .tool-card:hover .arrow {
            gap: 12px;
        }

        /* Clinical Tools Section */
        .clinical-grid {
            display: grid;
            /* FIX: Adjusted for mobile lists */
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 48px;
        }

        .clinical-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .clinical-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .clinical-card i {
            font-size: 1.5rem;
            color: var(--secondary);
            width: 40px;
            text-align: center;
        }

        .clinical-card span {
            font-weight: 500;
            color: var(--gray-700);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        footer a {
            color: var(--secondary);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Tweaks */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .logo-text {
                font-size: 1.75rem;
            }

            .logo i {
                font-size: 2rem;
            }

            header p {
                font-size: 1rem;
                padding: 0 10px;
                line-height: 1.5;
            }

            .tools-grid {
                /* Ensures grid doesn't break on very narrow screens */
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .clinical-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .tool-card {
                padding: 20px;
            }
            
            .tool-card h3 {
                font-size: 1.2rem;
            }
            
            .tool-card p {
                font-size: 0.9rem;
            }
            
            .tool-features {
                gap: 6px;
            }
            
            .feature-tag {
                font-size: 0.75rem;
                padding: 4px 10px;
            }
            
            .quick-access {
                flex-direction: column;
                padding: 12px;
                gap: 8px;
            }
            
            .quick-link {
                width: 100%;
                justify-content: center;
                padding: 10px 16px;
            }
            
            .section-title {
                font-size: 1.25rem;
                padding-left: 0;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .logo-text {
                font-size: 1.5rem;
            }
            
            header p {
                font-size: 0.9rem;
            }
            
            .tool-card {
                padding: 16px;
            }
            
            .tool-icon {
                width: 56px;
                height: 56px;
                font-size: 1.5rem;
            }
        }

        /* Quick Access Bar */
        .quick-access {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px 12px;
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .quick-link {
            color: var(--white);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.05); /* Added slight background for visibility */
        }

        .quick-link:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .badge {
            background: var(--accent);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Search Bar */
        .search-container {
            margin: 32px auto;
            max-width: 600px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 16px 48px 16px 20px;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--gray-800);
            transition: all 0.3s;
            outline: none;
        }

        .search-box:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-400);
            font-size: 1.2rem;
        }

        .search-results {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 8px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-200);
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
            display: block;
            color: inherit;
        }

        .search-result-item:hover {
            background: var(--gray-50);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .search-result-desc {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--gray-500);
        }

        /* Stats Section */
        .stats-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 32px;
            margin: 48px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 24px;
            text-align: center;
        }

        .stat-item {
            color: white;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            display: block;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Dark mode toggle */
        .theme-toggle {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
            transition: all 0.3s;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 88px;
            right: 24px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--primary);
            transition: all 0.3s;
            z-index: 1000;
        }

        .back-to-top.visible {
            display: flex;
        }

        .back-to-top:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-heartbeat"></i>
                <span class="logo-text">SZMC Geriatrics</span>
            </div>
            <p>Shaare Zedek Medical Center - Geriatrics Department<br>Clinical tools, educational resources & presentation maker</p>
        </header>

        <div class="quick-access">
            <a href="szmc-presentation-maker/" class="quick-link">
                <i class="fas fa-desktop"></i> Presentation Maker
            </a>
            <a href="clinical-tools/dashboard.html" class="quick-link">
                <i class="fas fa-stethoscope"></i> Clinical Tools
            </a>
            <a href="h5p/" class="quick-link">
                <i class="fas fa-graduation-cap"></i> Study Mode
            </a>
            <a href="hazzards/" class="quick-link">
                <i class="fas fa-book"></i> Hazzard's
                <span class="badge">NEW</span>
            </a>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" class="search-box" id="searchBox" placeholder="Search tools, topics, and resources..." aria-label="Search">
            <i class="fas fa-search search-icon"></i>
            <div class="search-results" id="searchResults"></div>
        </div>

        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-item">
                <span class="stat-number">25+</span>
                <span class="stat-label">Slide Templates</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">12</span>
                <span class="stat-label">Geriatrics Topics</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">88</span>
                <span class="stat-label">Practice Questions</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">10+</span>
                <span class="stat-label">Clinical Tools</span>
            </div>
        </div>

        <main>
            <h2 class="section-title"><i class="fas fa-star"></i> Main Tools</h2>
            <div class="tools-grid">
                <a href="szmc-presentation-maker/" class="tool-card">
                    <div class="tool-icon presentation">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3>Presentation Maker</h3>
                    <p>Create professional medical presentations following global standards (AMA, NLM, ICMJE). Features include case/journal club templates, text-to-slides generator, AI assistant, import (JSON/PPTX/HTML), and export (PPTX/PDF/HTML).</p>
                    <div class="tool-features">
                        <span class="feature-tag">Auto-Generate</span>
                        <span class="feature-tag">AI Assistant</span>
                        <span class="feature-tag">Import/Export</span>
                        <span class="feature-tag">Multi-Format</span>
                    </div>
                    <div class="arrow">
                        Open Presentation Maker <i class="fas fa-arrow-right"></i>
                    </div>
                </a>

                <a href="clinical-tools/dashboard.html" class="tool-card">
                    <div class="tool-icon clinical">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h3>Clinical Tools Dashboard</h3>
                    <p>Quick access to geriatric assessments, medication references, evidence-based guidelines, and clinical decision support tools.</p>
                    <div class="tool-features">
                        <span class="feature-tag">Assessments</span>
                        <span class="feature-tag">Medications</span>
                        <span class="feature-tag">Anticoagulation</span>
                        <span class="feature-tag">On-Call</span>
                    </div>
                    <div class="arrow">
                        Open Clinical Tools <i class="fas fa-arrow-right"></i>
                    </div>
                </a>

                <a href="h5p/" class="tool-card">
                    <div class="tool-icon h5p">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Interactive Study Mode</h3>
                    <p>H5P-powered interactive learning content with quizzes, flashcards, and self-assessment tools for board exam preparation.</p>
                    <div class="tool-features">
                        <span class="feature-tag">Quizzes</span>
                        <span class="feature-tag">Flashcards</span>
                        <span class="feature-tag">Self-Assessment</span>
                    </div>
                    <div class="arrow">
                        Start Studying <i class="fas fa-arrow-right"></i>
                    </div>
                </a>

                <a href="hazzards/" class="tool-card">
                    <div class="tool-icon hazzards">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <h3>Hazzard's Geriatric Medicine</h3>
                    <p>Comprehensive study materials from Hazzard's Geriatric Medicine 8th Edition. Organized by chapters with searchable content.</p>
                    <div class="tool-features">
                        <span class="feature-tag">Part 1</span>
                        <span class="feature-tag">Part 2</span>
                        <span class="feature-tag">Part 3</span>
                        <span class="feature-tag">Searchable</span>
                    </div>
                    <div class="arrow">
                        Open Hazzard's <i class="fas fa-arrow-right"></i>
                    </div>
                </a>
            </div>

            <h2 class="section-title"><i class="fas fa-tools"></i> Clinical Tools</h2>
            <div class="clinical-grid">
                <a href="clinical-tools/assessments.html" class="clinical-card">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Geriatric Assessments</span>
                </a>
                <a href="clinical-tools/medications.html" class="clinical-card">
                    <i class="fas fa-pills"></i>
                    <span>Medication Reference</span>
                </a>
                <a href="clinical-tools/anticoag.html" class="clinical-card">
                    <i class="fas fa-tint"></i>
                    <span>Anticoagulation</span>
                </a>
                <a href="clinical-tools/decisions.html" class="clinical-card">
                    <i class="fas fa-balance-scale"></i>
                    <span>Clinical Decisions</span>
                </a>
                <a href="clinical-tools/evidence.html" class="clinical-card">
                    <i class="fas fa-search"></i>
                    <span>Evidence Search</span>
                </a>
                <a href="clinical-tools/exam.html" class="clinical-card">
                    <i class="fas fa-user-md"></i>
                    <span>Physical Exam</span>
                </a>
                <a href="clinical-tools/oncall.html" class="clinical-card">
                    <i class="fas fa-phone-alt"></i>
                    <span>On-Call Reference</span>
                </a>
                <a href="clinical-tools/study.html" class="clinical-card">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Study Resources</span>
                </a>
                <a href="clinical-tools/ai-assistant.html" class="clinical-card">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </a>
            </div>
        </main>

        <footer>
            <p>Shaare Zedek Medical Center - Geriatrics Department</p>
            <p style="margin-top: 8px;">
                <a href="https://github.com/Eiasash/geriatrics-study" target="_blank">
                    <i class="fab fa-github"></i> View on GitHub
                </a>
            </p>
        </footer>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Search Functionality
        const searchData = [
            { title: 'Presentation Maker', desc: 'Create medical presentations', url: 'szmc-presentation-maker/', keywords: ['presentation', 'slides', 'pptx', 'case', 'journal', 'club'] },
            { title: 'Clinical Tools Dashboard', desc: 'Geriatric assessments and tools', url: 'clinical-tools/dashboard.html', keywords: ['clinical', 'tools', 'assessments', 'medications'] },
            { title: 'Geriatric Assessments', desc: 'MMSE, MoCA, GDS, ADL/IADL', url: 'clinical-tools/assessments.html', keywords: ['mmse', 'moca', 'gds', 'adl', 'iadl', 'assessment'] },
            { title: 'Medication Reference', desc: 'Beers criteria, drug interactions', url: 'clinical-tools/medications.html', keywords: ['medications', 'drugs', 'beers', 'criteria', 'interactions'] },
            { title: 'Anticoagulation Management', desc: 'CHADS-VASc, HAS-BLED, reversal', url: 'clinical-tools/anticoag.html', keywords: ['anticoagulation', 'warfarin', 'doac', 'chads', 'hasbled'] },
            { title: 'H5P Study Mode', desc: 'Interactive quizzes and flashcards', url: 'h5p/', keywords: ['h5p', 'quiz', 'flashcards', 'study', 'questions'] },
            { title: 'Hazzard\'s 8e', desc: 'Geriatric medicine textbook', url: 'hazzards/', keywords: ['hazzards', 'textbook', 'reference', 'geriatric medicine'] },
            { title: 'AI Assistant', desc: 'Clinical decision support', url: 'clinical-tools/ai-assistant.html', keywords: ['ai', 'assistant', 'clinical', 'decision', 'support'] },
            { title: 'On-Call Reference', desc: 'Quick reference for on-call', url: 'clinical-tools/oncall.html', keywords: ['oncall', 'on-call', 'emergency', 'reference'] },
            { title: 'Physical Exam', desc: 'Geriatric physical examination', url: 'clinical-tools/exam.html', keywords: ['exam', 'physical', 'examination', 'geriatric'] },
            { title: 'Evidence Search', desc: 'Guidelines and literature', url: 'clinical-tools/evidence.html', keywords: ['evidence', 'guidelines', 'literature', 'search'] },
        ];

        const searchBox = document.getElementById('searchBox');
        const searchResults = document.getElementById('searchResults');

        searchBox.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length < 2) {
                searchResults.classList.remove('active');
                return;
            }

            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) ||
                item.desc.toLowerCase().includes(query) ||
                item.keywords.some(k => k.includes(query))
            );

            if (results.length > 0) {
                searchResults.innerHTML = results.map(item => `
                    <a href="${item.url}" class="search-result-item">
                        <div class="search-result-title">${item.title}</div>
                        <div class="search-result-desc">${item.desc}</div>
                    </a>
                `).join('');
                searchResults.classList.add('active');
            } else {
                searchResults.innerHTML = '<div class="no-results">No results found</div>';
                searchResults.classList.add('active');
            }
        });

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                searchResults.classList.remove('active');
            }
        });

        // Back to Top Button
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });

        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Theme Toggle (placeholder - can be extended)
        const themeToggle = document.getElementById('themeToggle');
        let isDark = false;

        themeToggle.addEventListener('click', () => {
            isDark = !isDark;
            const icon = themeToggle.querySelector('i');
            
            if (isDark) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                // Add dark mode styles here
                document.body.style.filter = 'invert(0.9) hue-rotate(180deg)';
                document.querySelectorAll('img, .tool-icon').forEach(el => {
                    el.style.filter = 'invert(1) hue-rotate(180deg)';
                });
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                document.body.style.filter = '';
                document.querySelectorAll('img, .tool-icon').forEach(el => {
                    el.style.filter = '';
                });
            }
        });

        // Service Worker Registration for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/geriatrics-study/sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
